<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Living Lines</title>
    <style>
        body { margin: 0; overflow: hidden; background: #eccc68; cursor: crosshair; }
        canvas { display: block; }
        .ui { position: absolute; top: 10px; left: 10px; font-family: serif; color: #2f3542; font-weight: bold; pointer-events: none;}
    </style>
</head>
<body>
    <div class="ui">Нажми и рисуй. Пробел = Очистить.</div>
    <canvas id="c"></canvas>
    <script>
        const cvs = document.getElementById('c');
        const ctx = cvs.getContext('2d');
        let lines = [];
        let isD = false;
        let curLine = [];

        function sz() { cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
        window.onresize = sz;
        sz();

        window.onmousedown = () => { isD = true; curLine = []; lines.push(curLine); };
        window.onmouseup = () => isD = false;
        window.onmousemove = e => { if(isD) curLine.push({x: e.clientX, y: e.clientY}); };
        window.onkeydown = e => { if(e.code === 'Space') lines = []; };

        function draw() {
            ctx.clearRect(0, 0, cvs.width, cvs.height);
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#2f3542';

            lines.forEach(line => {
                if (line.length < 2) return;
                ctx.beginPath();
                ctx.moveTo(
                    line[0].x + (Math.random() - 0.5) * 3, 
                    line[0].y + (Math.random() - 0.5) * 3
                );
                for (let i = 1; i < line.length; i++) {
                    ctx.lineTo(
                        line[i].x + (Math.random() - 0.5) * 3, 
                        line[i].y + (Math.random() - 0.5) * 3
                    );
                }
                ctx.stroke();
            });
            
            setTimeout(() => requestAnimationFrame(draw), 40);
        }
        draw();
    </script>
</body>
</html>